START

DISPLAY "Select a function:"
DISPLAY "1. Basic Calculator"
DISPLAY "2. Discount Calculator"
DISPLAY "3. Currency Converter"
DISPLAY "4. Savings Calculator"
DISPLAY "5. Toggle Dark Mode"

INPUT userChoice

IF userChoice = 1 THEN
    SET expression = ""
    LOOP
        INPUT value
        IF value = "=" THEN
            CALCULATE result = EVALUATE(expression)
            PRINT "Result: ", result
            EXIT LOOP
        ELSE IF value = "C" THEN
            SET expression = ""
        ELSE
            APPEND value TO expression
        END IF
    END LOOP
END IF

IF userChoice = 2 THEN
    INPUT originalPrice
    INPUT discountPercent
    IF originalPrice IS NOT a number OR discountPercent IS NOT a number THEN
        PRINT "Invalid input!"
    ELSE
        CALCULATE discountAmount = originalPrice * (discountPercent / 100)
        CALCULATE finalPrice = originalPrice - discountAmount
        PRINT "Discount Amount: ", discountAmount
        PRINT "Final Price: ", finalPrice
    END IF
END IF

IF userChoice = 3 THEN
    INPUT amount
    INPUT currencyPair
    IF amount IS NOT a number THEN
        PRINT "Invalid input!"
    ELSE
        SET rate BASED ON currencyPair
        CALCULATE convertedValue = amount * rate
        PRINT "Converted Value: ", convertedValue
    END IF
END IF

IF userChoice = 4 THEN
    INPUT initialSavings
    INPUT monthlyDeposit
    INPUT annualRate
    INPUT years
    IF ANY INPUT IS NOT a number THEN
        PRINT "Invalid input!"
    ELSE
        CALCULATE months = years * 12
        CALCULATE monthlyRate = annualRate / 12 / 100
        CALCULATE futureValue =
            initialSavings * (1 + monthlyRate)^months +
            monthlyDeposit * ((1 + monthlyRate)^months - 1) / monthlyRate
        PRINT "Total Savings after ", years, " years: ", futureValue
    END IF
END IF

IF userChoice = 5 THEN
    TOGGLE theme BETWEEN Dark and Light
    PRINT "Theme changed"
END IF

END
